sudo: required
language: generic
services:
- docker
after_success:
- docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
- export REPO=webc/isobuilder
- export TAG=$(test "$TRAVIS_BRANCH" == "master" && echo "latest" || echo "$TRAVIS_BRANCH")
- docker build -f Dockerfile -t $REPO:$COMMIT .
- docker tag $REPO:$COMMIT $REPO:$TAG
- docker tag $REPO:$COMMIT $REPO:travis-$TRAVIS_BUILD_NUMBER
- docker push $REPO
env:
  global:
  - secure: 0xeYR6GIdRXIJkDox/qQSIKFJVovqVvEpPxrDVhVGWJclcd8u793R4Fx0vqhaVeKtgG4uki/RO+qIhd/kAEo2xqV5cdDS5FbWSz0x7DWOa13ALZuD53IPt0fzxJPwXOVC/fjoZ4lRoH0qYFpSaDtzmeL/UZh+jmABek7IsM8KkWihy91rSLgdYbWgN9WTRK/wvgQODFpW2absATcTMpiIn7ApEq2/fobCzaOEBjSCjm+apDa4yHCieCCfR6vQp2rmSJjB1F3tLtEmjWfxfbtFtZoiAICurrOxgzhlG62GU+dWez5GlUJCanbOyffaBdNgB1RVS96R1+cCkKsKLp2voBsqJlh/lzHDXyBE5FaM4Zq49lsq8rW5POLN7u8HTI0mXyqfFS7A+MJ5oHRjjGuwZ7sbxd4HpDyR8T8eVbF+oQecey0R1UYMtJy2o0pzXAnb0scZfcLTDaH+i2UdduFTlwasm8fiNil2aLeQtlKBMPmtBfIg2GcoxMKSL90puUtndqL44u1gfKga3IAvbI0SQXiJvH85Frim/8m6LFABbM5w4Eq0yh3y6fn56RtnJIA/T5v/wq7OyXIW8/hPqOEYGK9a1XNJPtPyZEYJpJGy+v2XmFM9STDrjtnQDrMUqVH6KWDXQ/e60iVYD7TPe4TzQ5pUpZyPnHjuvlCNBQdexI=
  - secure: VnQRMbj1M5p50cF7LOb09bB+eDcVDVjrZgQtaDP5U9AOUmAGo04LFF93qzCC3OK3nOW0Ax/k1dTwf2VSoSvwhuR91ETyJSjBYOcQVnPEHz69ea4eTcnJCW/9O7SdzKSrF4g1SfydWnCDs+ZZ5ySCKNh2Vux9QSqMgCB60RG99CavzotMpuZwB+1cc0hfa0wpHuOJyhaYM76a+Dw9JgGx4AC3wPl6Q57TYF90fa1ua7KJUpaixtoMZOS0+av9rXWyAYd1aFsIxa8RG7EO9e9iJlSjbAZI4xVM8Kcl2CZyKiiLTPsG0jxdPxatoTpcUQBM4p/Ciply432qle4DKJszDQPiXD0d3RumPRhxKBQJqsqgclz3PhZxTGhwBWeGc1SFLFWoIpjrYDWS0Mdk1fI0r+UiLH7lMJNAx6r6+eaRmPSk659YQl9Sg91d8tmD9xGCn2/6/INiEDSrGGxxpxeJdn0t+sfqJbjsUTrIwFBUtkBe7bMgEH+b0pJGUGq321tEfYo5UtHG77bhI1VeGxSMP8CO38tNlUdu/y7X7GTj7dWUz+fNNFZs4EIY/zT+Y3VM7T7lXzevFJmwTy2+3pnE6xkQ5jcjHrSZVRxlblJNY5hYDaYUqbySIpoWhH5jwRn6sW9KSsIiKGcIndtdoF1lqTjtIPHVXUFfvHDV3ji3p0Q=
  - secure: Gb9G27LsRt1lX8UxopkmZcmy65Vnn4adQXd4obrVa1nbmVBfF/+FJQ1YId5ULbrcf9R4pJdc9xIVB4xkZHb5JB8P4xFoUO7rEi97t3qdB8SuI4BjxWK1eoH6HSNN+xmRAKzUxN6w9bwo/zI+GsbY8mViEB5A4rEmfX/9yoajtErQxHh49j67DCKYKkJz6o6Im995FXpvHWSo6n9casvfWGsT2t0668KNGFM7KY+lbrqBXbMzhgozmlXquO5WiKZ8u+8KLqVI9A0BT1kgjFh44jJfvuTkiO9lSuJzO/PKDyMn5trjCT4pOumgWO2bAF+T+IjUKaK5ZvLjjyPgkdqN6A7FtrIapRIgQXlM0k1akVPio4gKw+ih0WTjtbZwxNUtKQrlINL7ilj7y0XdX5rmN/boGIy2eC+Egk4jUXuISZSwNp7GrgJsMEk0iQeof3ikAPuMd3nWxU3eLI/4pSgUJHqDuEvtBOt0tYpjimpPIEmMtzbTGoy1gKAaK9jI+NgchXh9BlnXCxz7SfnJ8A8ARI0rbSk9MOwgtT+EVs8O8sF6L7BZ0AHCmdHm9spWvE41ETiB14iF6TvThISFuVftfxNBCQuvH0bTbl7ZseTI5/FpzJJh8QUfx3ql3CWx56hwpEFKmh036mFKIuNzOvucpgjZ47eI5CMiPfnGRIp+Oeo=
  - COMMIT=${TRAVIS_COMMIT::8}
