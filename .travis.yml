sudo: required
language: generic
services:
- docker
after_success:
  - docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
  - export REPO=hendry/webcbuild
  - export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH ; fi`
  - docker build -f Dockerfile -t $REPO:$COMMIT .
  - docker tag $REPO:$COMMIT $REPO:$TAG
  - docker tag $REPO:$COMMIT $REPO:travis-$TRAVIS_BUILD_NUMBER
  - docker push $REPO
env:
  global:
  - secure: 0xeYR6GIdRXIJkDox/qQSIKFJVovqVvEpPxrDVhVGWJclcd8u793R4Fx0vqhaVeKtgG4uki/RO+qIhd/kAEo2xqV5cdDS5FbWSz0x7DWOa13ALZuD53IPt0fzxJPwXOVC/fjoZ4lRoH0qYFpSaDtzmeL/UZh+jmABek7IsM8KkWihy91rSLgdYbWgN9WTRK/wvgQODFpW2absATcTMpiIn7ApEq2/fobCzaOEBjSCjm+apDa4yHCieCCfR6vQp2rmSJjB1F3tLtEmjWfxfbtFtZoiAICurrOxgzhlG62GU+dWez5GlUJCanbOyffaBdNgB1RVS96R1+cCkKsKLp2voBsqJlh/lzHDXyBE5FaM4Zq49lsq8rW5POLN7u8HTI0mXyqfFS7A+MJ5oHRjjGuwZ7sbxd4HpDyR8T8eVbF+oQecey0R1UYMtJy2o0pzXAnb0scZfcLTDaH+i2UdduFTlwasm8fiNil2aLeQtlKBMPmtBfIg2GcoxMKSL90puUtndqL44u1gfKga3IAvbI0SQXiJvH85Frim/8m6LFABbM5w4Eq0yh3y6fn56RtnJIA/T5v/wq7OyXIW8/hPqOEYGK9a1XNJPtPyZEYJpJGy+v2XmFM9STDrjtnQDrMUqVH6KWDXQ/e60iVYD7TPe4TzQ5pUpZyPnHjuvlCNBQdexI=
  - secure: VnQRMbj1M5p50cF7LOb09bB+eDcVDVjrZgQtaDP5U9AOUmAGo04LFF93qzCC3OK3nOW0Ax/k1dTwf2VSoSvwhuR91ETyJSjBYOcQVnPEHz69ea4eTcnJCW/9O7SdzKSrF4g1SfydWnCDs+ZZ5ySCKNh2Vux9QSqMgCB60RG99CavzotMpuZwB+1cc0hfa0wpHuOJyhaYM76a+Dw9JgGx4AC3wPl6Q57TYF90fa1ua7KJUpaixtoMZOS0+av9rXWyAYd1aFsIxa8RG7EO9e9iJlSjbAZI4xVM8Kcl2CZyKiiLTPsG0jxdPxatoTpcUQBM4p/Ciply432qle4DKJszDQPiXD0d3RumPRhxKBQJqsqgclz3PhZxTGhwBWeGc1SFLFWoIpjrYDWS0Mdk1fI0r+UiLH7lMJNAx6r6+eaRmPSk659YQl9Sg91d8tmD9xGCn2/6/INiEDSrGGxxpxeJdn0t+sfqJbjsUTrIwFBUtkBe7bMgEH+b0pJGUGq321tEfYo5UtHG77bhI1VeGxSMP8CO38tNlUdu/y7X7GTj7dWUz+fNNFZs4EIY/zT+Y3VM7T7lXzevFJmwTy2+3pnE6xkQ5jcjHrSZVRxlblJNY5hYDaYUqbySIpoWhH5jwRn6sW9KSsIiKGcIndtdoF1lqTjtIPHVXUFfvHDV3ji3p0Q=
  - secure: gLypH0HARrwxdQyW+uKQRVuDC2GbeB7ns8BRXe2ksaw43A7htMuCmP72F6g40tvgHQMEXuHgXk4n6AbNqLi6JRiXfpuWFUjERSE/y3p1d+ctWPn+TWri3aOKwmE9cSiA8tfM21beURtoRMs0OqyTzArc/xS2T5Thfuj5tyfsWwQX5WxRuhYO5m7JLU3EMhdD6gyHkF2iPjlPSMGeigJ2ivHBhlDLSko1D+27npyZAwCoWNKs/OBzUei/25O516mvNdngqTLdD4bkOWfMXNqv0sIRUPCMmY9gHLlJcjX3FlBoEgPuIyB3aR9pQFOKSddXFJEefZHfomoJr0uaFafXoueMqawbujS1GhCtCR3GrooIsRp6NnGRhDTIVcVM8LhZ5MWsmfrE80qFmAOWVFjC9YFyktyc8CnHo6Y2yq+98sm1vbJ6T6bsI7AySMEVUKe2VRGKJJo15hbkhimGpAADSx6PHcVOdOshSQryen5yVfoNj3GZDBEUAUkLplD59z4vwtc+eYisJSbU1D6COLN0BxIIa34qx2bZYF/zEaM4/Kh8tQwApM24/angQDOBuZDSMiewihs9oEolbEYKTc7m1toLwrfwKv7YzPWG3dQJ6X/W39fWTuT3t4NviTacXlmpSgq5TeWwfI7hA25iBCVEmD7QznYWa6WRZhZTNBeClnc=
  - COMMIT=${TRAVIS_COMMIT::8}

